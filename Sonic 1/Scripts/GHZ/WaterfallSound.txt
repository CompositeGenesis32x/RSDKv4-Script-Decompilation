// ----------------------------------
// RSDK Project: Sonic 1
// Script Description: Waterfall Sound Object
// Script Author: Christian Whitehead/Simon Thomley
// Unpacked by Rubberduckycooly's script unpacker
// ----------------------------------

// ========================
// Aliases
// ========================
// Both Unused...
private alias object.value0 : object.unused1
private alias object.value1 : object.unused2

// Kept here for mod compatability reasons, please don't use these if possible
private alias GHZSetup_playingWaterfallSfx	: GHZSetup_value30
private alias GHZSetup_waterfallPan			: GHZSetup_value31

event ObjectMain
	object.priority = PRIORITY_ACTIVE

	GHZSetup_playingWaterfallSfx = true

	// Check if the object is out of bounds
	temp0 = screen.cameraX
	temp0 -= object.ixpos
	Abs(temp0)
	temp0 -= 128
	if temp0 > screen.xcenter
		object.priority = PRIORITY_XBOUNDS
		// these aren't set anywhere else...
		object.unused1 = 0
		object.unused2 = 0
	end if

	// Make the SFX pan relative to player 1's position
	GHZSetup_waterfallPan = object.xpos
	GHZSetup_waterfallPan -= object[0].xpos
	GHZSetup_waterfallPan >>= 18
end event


event ObjectStartup
	foreach (TypeName[Waterfall Sound], arrayPos0, ALL_ENTITIES)
		object[arrayPos0].priority = PRIORITY_XBOUNDS
	next
end event


event RSDKDraw
	DrawSprite(0)
end event


event RSDKLoad
	LoadSpriteSheet("Global/Display.gif")
	SpriteFrame(-8, -8, 16, 16, 165, 141)
	
	SetVariableAlias(ALIAS_VAR_PROPVAL, "unused")
end event
