// ----------------------------------
// RSDK Project: Sonic 1
// Script Description: Spotlight Object
// Script Author: Christian Whitehead/Simon Thomley
// Unpacked by Rubberduckycooly's script unpacker
// ----------------------------------


event ObjectMain
	// NOTE:
	// This event exists in the bytecode, though its completely empty
	// This suggests that something either was here and got scrapped, leaving only the function
	// or that there was something like a #Platform: STANDARD check here that removed PC only code
	// this script decomp currently is based on MOBILE platform code, since that is the only code avaliable to the public at this point
end event


event ObjectDraw
	DrawSprite(0)
end event


event ObjectStartup
	LoadSpriteSheet("Special/Objects.gif")
	SpriteFrame(-24, -6, 48, 13, 350, 376) 	// 0 - Spotlight

	foreach (TypeName[Spotlight], arrayPos0, ALL_ENTITIES)
		object[arrayPos0].drawOrder = 3
		object[arrayPos0].xpos = screen.xcenter
		object[arrayPos0].xpos <<= 16

		if object[1].type != TypeName[Blank Object]
			// If there's a second player, move the spotlights to make room for two
			if object[arrayPos0].propertyValue == 0
				object[arrayPos0].xpos += 0x200000
			else
				object[arrayPos0].xpos -= 0x200000
			end if
		end if
	next

end event


event RSDKDraw
	DrawSprite(0)
end event


event RSDKLoad
	LoadSpriteSheet("Special/Objects.gif")
	SpriteFrame(-24, -6, 48, 13, 350, 376)
	
	SetVariableAlias(ALIAS_VAR_PROPVAL, "playerID")
end event
